/**
 * @license FuzzySearch.js
 * Autocomplete suggestion engine using approximate string matching
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){"use strict";function e(t){return void 0===t&&(t={}),this instanceof e?void e.setOptions(this,t,e.defaultOptions,!0):new e(t)}function t(e,t,r,n,i){this.normalized=e,this.tokens_groups=t,this.fused_str=r,this.fused_score=0,this.fused_map=n,this.single=i}function r(e,t,r){this.tokens=e,this.map=t,this.gate=r;for(var n=e.length,i=-1,o=new Array(n);++i<n;)o[i]=0;this.score_item=o.slice(),this.score_field=o.slice(),this.field_pos=o}function n(e,t,r,n,i){this.score=e,this.item=t,this.matchIndex=r,this.match=n,this.sortKey=i}function i(e,t){this.item=e,this.fields=t}function o(e,t,r,n){for(var i,s,a,u=t.length;u>n&&(i=t[n],"*"!==i);){if(!(i in e))return r;e=e[i],n++}var f=Object.prototype.toString.call(e),h="[object Array]"===f,_="[object Object]"===f;if(n===u)if(h)for(a=e.length,s=-1;++s<a;)r.push(e[s].toString());else if(_)for(i in e)e.hasOwnProperty(i)&&r.push(e[i].toString());else r.push(e.toString());else if("*"===i)if(n++,h)for(a=e.length,s=-1;++s<a;)o(e[s],t,r,n);else if(_)for(i in e)e.hasOwnProperty(i)&&o(e[i],t,r,n);return r}function s(e,t){this.start=e,this.end=t}e.defaultOptions={minimum_match:1,thresh_include:2,thresh_relative_to_best:.5,field_good_enough:20,bonus_match_start:.5,bonus_token_order:2,bonus_position_decay:.7,score_per_token:!0,score_test_fused:!0,score_round:.1,recover_match:!1,output_limit:0,output_map:"",token_query_min_length:2,token_field_min_length:3,token_query_max_length:64,token_field_max_length:64,token_fused_max_length:64,token_min_rel_size:.6,token_max_rel_size:6,interactive_debounce:150,interactive_mult:1.2,interactive_burst:3,source:[],keys:[""],sorter:null,dirty:!1,index:[],query:null,results:[],start_time:0,search_time:0};var a=32;e.setOptions=function(t,r,n,i){var o,s=t.source,a=t.keys;if(i)for(o in n)n.hasOwnProperty(o)&&(t[o]=r.hasOwnProperty(o)?r[o]:n[o]);else for(o in r)r.hasOwnProperty(o)&&n.hasOwnProperty(o)&&(t[o]=r[o]);(t.source!==s||t.keys!==a)&&(e.addSource(t,t.source,t.keys,!0),t.dirty=!1)},e.addSource=function(t,r,n,o){var s,a=r.length;o?(t.index=new Array(a),s=0):s=a;for(var u=t.index,f=t.token_field_min_length,h=t.token_field_max_length,_=-1;++_<a;){for(var c=r[_],l=e.generateFields(c,n),d=l.length,p=new Array(d),m=-1;++m<d;)p[m]=e.filterSize(e.normalize(l[m]).split(" "),f,h);u[s++]=new i(c,p)}return t},e.prototype={setOptions:function(t,r){void 0===t&&(t={}),void 0===r&&(r=!1),e.setOptions(this,t,e.defaultOptions,r)},search:function(t){var r=window.performance&&window.performance.now?window.performance:Date,n=r.now();this.start_time=n,this.dirty&&(e.addSource(this,this.source,this.keys,!0),this.dirty=!1);var i=this.query=this._prepQuery(t),o=this.index,s=[],a=this._searchIndex(i,o,s);s=e.filterGTE(s,"score",a),this.sorter&&(s=s.sort(this.sorter)),(this.output_map.length||this.output_limit>0)&&(s=e.mapField(s,this.output_map,this.output_limit));var u=r.now();return this.search_time=u-n,this.results=s,s},_searchIndex:function(t,r,i){for(var o=this.bonus_position_decay,s=this.field_good_enough,a=this.thresh_relative_to_best,u=this.score_per_token,f=this.thresh_include,h=0,_=t.single,c=-1,l=r.length;++c<l;){for(var d=r[c],p=d.fields,m=t.tokens_groups,v=-1,g=m.length;++v<g;)for(var k=m[v].score_item,w=-1,y=k.length;++w<y;)k[w]=0;t.fused_score=0;for(var b=0,x=-1,O=1,z=-1,S=p.length;++z<S;){var j;if(j=u?_?this._scoreFieldSingle(p[z],t):this._scoreField(p[z],t):e.score_map(t.fused_str,p[z].join(" "),t.fused_map,this),j*=1+O,O*=o,j>b&&(b=j,x=z,j>s))break}if(u&&!_){var A=0;for(v=-1;++v<g;)for(var F=m[v].score_item,V=-1,q=F.length;++V<q;)A+=F[V];t.fused_score>A&&(A=t.fused_score),b=.5*b+.5*A}if(b>h){h=b;var P=b*a;P>f&&(f=P)}b>f&&(b=Math.round(b/this.score_round)*this.score_round,i.push(new n(b,d.item,x,p[x].join(" "),p[0].join(" "))))}return f},_scoreField:function(t,r){for(var n,i,o,s,a=r.tokens_groups,u=a.length,f=t.length,h=0,_=-1,c=this.bonus_token_order,l=this.minimum_match,d=-1;++d<u;){var p=a[d],m=p.tokens,v=m.length,g=1==v,k=p.score_field;for(s=-1;++s<v;)k[s]=0;var w=p.field_pos;for(s=-1;++s<v;)w[s]=0;for(var y=-1;++y<f;)if(i=t[y],g)n=e.score_map(m[0],i,p.map,this),n>k[0]&&(k[0]=n,w[0]=y);else for(o=e.score_pack(p,i,this),s=-1;++s<v;)n=o[s],n>k[s]&&(k[s]=n,w[s]=y);var b=p.score_item;for(s=-1;++s<v;)if(n=k[s],h+=n,n>b[s]&&(b[s]=n),n>l){var x=w[s];x>_&&(h+=c),_=x}}if(this.score_test_fused){var O=e.score_map(r.fused_str,t.join(" "),r.fused_map,this);h=O>h?O:h,O>r.fused_score&&(r.fused_score=O)}return h},_scoreFieldSingle:function(t,r){for(var n,i=t.length,o=0,s=-1;++s<i;){var a=t[s];n=e.score_map(r.fused_str,a,r.fused_map,this),n>o&&(o=n)}if(this.score_test_fused){var u=e.score_map(r.fused_str,t.join(" "),r.fused_map,this);o=u>o?u:o,u>r.fused_score&&(r.fused_score=u)}return o},_prepQuery:function(r){var n=e.normalize(r),i=this.score_per_token?e.filterSize(n.split(" "),this.token_query_min_length,this.token_query_max_length):[],o=i.length<2,s=o?[]:e.pack_tokens(i),a=n.substring(0,o?this.token_field_max_length:this.token_fused_max_length),u=this.score_test_fused||!this.score_per_token||o?e.alphabet(a):{};return new t(n,s,a,u,o)},getInteractive:function(){var e=this,t=this.interactive_debounce,r=this.interactive_mult,n=this.interactive_burst;if(0===t)return function(t,r){return r(e.search(t))};var i,o,s=window.performance&&window.performance.now?window.performance:Date,a=0,u=!1;return function(f,h,_,c){var l=function(){i=null,u&&(o=e.search(f),c(o)),a=0,u=!1};if(clearTimeout(i),i=setTimeout(l,t),++a<n){u=!1;var d=s.now();o=e.search(f);var p=h(o),m=s.now();return t=.5*t+.5*r*(m-d),p}return u=!0,_(o)}},__ttAdapter:function(){var e=this.getInteractive(),t=function(e){};return function(r,n,i){e(r,n,t,i)}}};for(var u="\xe3\xe0\xe1\xe4\xe2\xe6\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\u0153\xf9\xfa\xfc\xfb\xf1\xe7",f="aaaaaaeeeeeiiiioooooouuuunc",h={},_=0;_<u.length;_++)h[u[_]]=f[_];return e.normalize=function(e){return e?e.toLowerCase().replace(/\s+/g," ").replace(/[^\u0000-\u007E]/g,function(e){return h[e]||e}):""},e.compareResults=function(e,t){var r=t.score-e.score;if(0!==r)return r;var n=e.sortKey,i=t.sortKey;return n>i?1:i>n?-1:0},e.defaultOptions.sorter=e.compareResults,e.generateFields=function(e,t){if(!t.length)return[e.toString()];for(var r=[],n=0;n<t.length;n++)o(e,t[n].split("."),r,0);return r},e.filterSize=function(e,t,r){for(var n,i,o=-1,s=-1,a=e.length,u=[];++o<a;)n=e[o],i=n.length,i>=t&&(r>i?u[++s]=n:u[++s]=n.substr(0,r));return u},e.mapField=function(e,t,r){var n=e.length;if(r>0&&n>r&&(n=r),""==t)return e.slice(0,n);var i,o,s=new Array(n);if(-1===t.indexOf("."))for(o=-1;++o<n;)i=e[o],t in i&&(s[o]=i[t]);else{var a=t.split("."),u=a.length;for(o=-1;++o<n;){i=e[o];for(var f=-1;++f<u;){var h=a[f];if(!(h in i))break;i=i[h]}s[o]=i}}return s},e.filterGTE=function(e,t,r){for(var n,i=-1,o=-1,s=e.length,a=[];++i<s;)n=e[i],n[t]>=r&&(a[++o]=n);return a},e.prototype.score=function(t,r){return e.score(t,r,this)},e.score=function(t,r,n){void 0===n&&(n=e.defaultOptions);var i=e.alphabet(t);return e.score_map(t,r,i,n)},e.score_map=function(t,r,n,i){var o,s,u=t.length,f=r.length,h=i.bonus_match_start,_=f>u?u:f;if(0===_||f<i.token_min_rel_size*u||f>i.token_max_rel_size*u)return 0;var c=(u+f)/(2*u*f),l=0;if(t===r)l=_;else for(;t[l]===r[l]&&++l<_;);if(l===_)return s=l,c*s*s+h*l;if(u>a)return s=e.llcs_large(t,r,n,l),c*s*s+h*l;var d,p,m=(1<<u)-1,v=m;for(o=l-1;++o<f;)p=r[o],p in n&&(d=v&n[p],v=v+d|v-d);return m&=~((1<<l)-1),v=~v&m,v-=v>>1&1431655765,v=(858993459&v)+(v>>2&858993459),s=16843009*(v+(v>>4)&252645135)>>24,s+=l,c*s*s+h*l},e.score_pack=function(e,t,r){for(var n,i,o=e.tokens,s=o.length,a=4294967295,u=0|e.gate,f=e.map,h=t.length,_=-1;++_<h;)i=t[_],i in f&&(n=a&f[i],a=(a&u)+(n&u)|a-n);a=~a;for(var c=-1,l=0,d=r.bonus_match_start,p=r.token_min_rel_size,m=r.token_max_rel_size,v=new Array(s);++c<s;){var g,k,w=o[c],y=w.length;if(p*y>h||h>m*y)v[c]=0,l+=y;else{if(w===t)k=g=y;else{var b=h>y?y:h;for(k=0;w[k]===t[k]&&++k<b;);g=k;for(var x=(a>>>l&(1<<y)-1)>>>k;x;)x&=x-1,g++}l+=y;var O=(y+h)/(2*y*h);v[c]=O*g*g+d*k}}return v},e.pack_tokens=function(t){for(var n,i=-1,o=t.length,s=[];o>i;){for(var u=[],f={},h=0,_=0;++i<o;){var c=t[i],l=c.length;if(l>=a){n=new r([c],e.posVector(c),4294967295);break}if(l+h>=a){i--;break}u.push(c),e.bitVector(c,f,h),_|=(1<<c.length-1)-1<<h,h+=l}u.length>0&&s.push(new r(u,f,_)),n&&(s.push(n),n=null)}return s},e.alphabet=function(t){var r=t.length;return r>a?e.posVector(t):e.bitVector(t,{},0)},e.mapAlphabet=function(t){for(var r=t.length,n=new Array(r),i=-1;++i<r;){var o=t[i];o.length>a?n[i]=e.posVector(o):n[i]=e.bitVector(o,{},0)}return n},e.bitVector=function(e,t,r){for(var n,i=e.length,o=-1,s=r;++o<i;)n=e[o],n in t?t[n]|=1<<s++:t[n]=1<<s++;return t},e.posVector=function(e){for(var t,r={},n=e.length,i=-1;++i<n;)t=e[i],t in r?r[t].push(i):r[t]=[i];for(t in r)r.hasOwnProperty(t)&&r[t].push(1/0);return r},e.llcs_large=function(e,t,r,n){var i,o,a,u,f,h,_;void 0===n&&(n=0),a=n?[new s(0,n),new s(1/0,1/0)]:[new s(1/0,1/0)];var c,l,d,p,m,v,g=n,k=t.length;for(v=n;k>v;v++){var w=t[v];if(w in r){c=r[w],u=[],f=-1,l=0,o=c[0],_=-1,p=-1;for(var y=a.length;++p<y;){for(h=_,d=a[p],i=d.start,_=d.end,m=_-i;h>o;)o=c[++l];o>=i?u[++f]=d:(o===h?u[f].end++:1===m?(d.start=o,d.end=o+1,u[++f]=d):u[++f]=new s(o,o+1),m>1&&(d.start++,u[++f]=d))}i>o&&(u[++f]=d,g++),a=u}}return g},"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.FuzzySearch=e,e}();
//# sourceMappingURL=../map/FuzzySearch.map