/**
 * @license FuzzySearch.js
 * Autocomplete suggestion engine using approximate string matching
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){"use strict";function t(e){return void 0===e&&(e={}),this instanceof t?void t.setOptions(this,e,t.defaultOptions,f,!0,this._optionsHook):new t(e)}function e(t,e,r,n){this.normalized=t,this.tokens_groups=e,this.fused_str=r,this.fused_score=0,this.fused_map=n}function r(t,e,r){this.tokens=t,this.map=e,this.gate=r;for(var n=t.length,i=-1,o=new Array(n);++i<n;)o[i]=0;this.score_item=o.slice(),this.score_field=o.slice(),this.field_pos=o}function n(t,e,r,n,i,o){this.item=t,this.fields=e,this.score=r,this.matchIndex=n,this.subIndex=i,this.sortKey=o}function i(t,e){this.item=t,this.fields=e}function o(t,e){var r=e.score-t.score;if(0!==r)return r;var n=t.sortKey,i=e.sortKey;return n>i?1:i>n?-1:0}function s(t,e){var r=e.length,n=0;for(d=-1;++d<r;){var i=e[d],o=i.length;t.substr(n,o)===i&&(n+=o)}return n>0?t.substr(n):t}function a(t){return t?t.toLowerCase().replace(/\s+/g," ").replace(/[^\u0000-\u007E]/g,function(t){return p[t]||t}):""}function u(t,e,r,n){for(var i,o,s,a=e.length;a>n&&(i=e[n++],"*"!==i&&""!==i);){if(!(i in t))return r;t=t[i]}var h=Object.prototype.toString.call(t),f="[object Array]"===h,c="[object Object]"===h;if(n===a)if(f)for(o=-1,s=t.length;++o<s;)r.push(t[o].toString());else if(c)for(i in t)t.hasOwnProperty(i)&&r.push(t[i].toString());else r.push(t.toString());else if("*"===i)if(f)for(o=-1,s=t.length;++o<s;)u(t[o],e,r,n);else if(c)for(i in t)t.hasOwnProperty(i)&&u(t[i],e,r,n);return r}function h(t,e){this.start=t,this.end=e}t.defaultOptions={minimum_match:1,thresh_include:2,thresh_relative_to_best:.5,field_good_enough:20,bonus_match_start:.5,bonus_token_order:2,bonus_position_decay:.7,score_per_token:!0,score_test_fused:!1,score_round:.1,output_limit:0,sorter:o,normalize:a,output_map:"item",join_str:", ",token_query_min_length:2,token_field_min_length:3,token_query_max_length:64,token_field_max_length:64,token_fused_max_length:64,token_min_rel_size:.6,token_max_rel_size:6,interactive_debounce:150,interactive_mult:1.2,interactive_burst:3,source:[],keys:[],dirty:!1};var f={tags:[],index:[],query:null,results:[],start_time:0,search_time:0},c=32;t.setOptions=function(t,e,r,n,i,o){var s;if(i){for(s in r)r.hasOwnProperty(s)&&(t[s]=e.hasOwnProperty(s)&&void 0!==e[s]?e[s]:r[s]);for(s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}else for(s in e)e.hasOwnProperty(s)&&r.hasOwnProperty(s)&&(t[s]=void 0===e[s]?r[s]:e[s]);o.call(t,e)},t.prototype={setOptions:function(e,r){void 0===e&&(e={}),void 0===r&&(r=e.reset||!1),t.setOptions(this,e,t.defaultOptions,f,r,this._optionsHook)},_optionsHook:function(e){"output_map"in e&&"string"==typeof e.output_map&&("alias"===this.output_map?this.output_map=this.aliasResult:this.output_map=s(this.output_map,["root","."]));var r;if("keys"in e&&void 0!==(r=e.keys)){var n=Object.prototype.toString.call(r),i=r.length;if(this.tags=null,"[object String]"===n)this.keys=i?[r]:[];else if("[object Object]"===n){this.keys=new Array(i),this.tags=new Array(i);var o=0;for(var a in r)r.hasOwnProperty(a)&&(this.tags[o]=a,this.keys[o]=r[a],o++)}this.keys=t.map(this.keys,function(t){return s(t,["item","."])}),this.tags||(this.tags=this.keys)}("source"in e||"keys"in e)&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1)},search:function(e){var r=window.performance&&window.performance.now?window.performance:Date,n=r.now();this.start_time=n,this.dirty&&(this._prepSource(this.source,this.keys,!0),this.dirty=!1);var i=this.query=this._prepQuery(e),o=this.index,s=[],a=this._searchIndex(i,o,s);s=t.filterGTE(s,"score",a),"function"==typeof this.sorter&&(s=s.sort(this.sorter)),(this.output_map||this.output_limit>0)&&(s="function"==typeof this.output_map?t.map(s,this.output_map,this,this.output_limit):t.mapField(s,this.output_map,this.output_limit));var u=r.now();return this.search_time=u-n,this.results=s,s},_searchIndex:function(e,r,i){for(var o=this.bonus_position_decay,s=this.field_good_enough,a=this.thresh_relative_to_best,u=this.score_per_token,h=this.thresh_include,f=0,c=-1,_=r.length;++c<_;){for(var l=r[c],p=l.fields,d=e.tokens_groups,m=-1,v=d.length;++m<v;)for(var g=d[m].score_item,y=-1,k=g.length;++y<k;)g[y]=0;e.fused_score=0;for(var w=0,b=-1,x=-1,O=1,z=-1,S=p.length;++z<S;){for(var j=0,A=-1,I=p[z],F=-1,P=I.length;++F<P;){var V,q=I[F];V=u?this._scoreField(q,e):t.score_map(e.fused_str,q.join(" "),e.fused_map,this),V>j&&(j=V,A=F)}if(j*=1+O,O*=o,j>w&&(w=j,b=z,x=A,j>s))break}if(u){var T=0;for(m=-1;++m<v;)for(var E=d[m].score_item,H=-1,K=E.length;++H<K;)T+=E[H];e.fused_score>T&&(T=e.fused_score),w=.5*w+.5*T}if(w>f){f=w;var D=w*a;D>h&&(h=D)}w>h&&(w=Math.round(w/this.score_round)*this.score_round,i.push(new n(l.item,p,w,b,x,p[0][0].join(" "))))}return h},_scoreField:function(e,r){for(var n,i,o,s,a=r.tokens_groups,u=a.length,h=e.length,f=0,c=-1,_=this.bonus_token_order,l=this.minimum_match,p=-1;++p<u;){var d=a[p],m=d.tokens,v=m.length,g=1==v,y=d.score_field;for(s=-1;++s<v;)y[s]=0;var k=d.field_pos;for(s=-1;++s<v;)k[s]=0;for(var w=-1;++w<h;)if(i=e[w],g)n=t.score_map(m[0],i,d.map,this),n>y[0]&&(y[0]=n,k[0]=w);else for(o=t.score_pack(d,i,this),s=-1;++s<v;)n=o[s],n>y[s]&&(y[s]=n,k[s]=w);var b=d.score_item;for(s=-1;++s<v;)if(n=y[s],f+=n,n>b[s]&&(b[s]=n),n>l){var x=k[s];x>c&&(f+=_),c=x}}if(this.score_test_fused){var O=t.score_map(r.fused_str,e.join(" "),r.fused_map,this);f=O>f?O:f,O>r.fused_score&&(r.fused_score=O)}return f},_prepQuery:function(r){var n=this.normalize(r),i=this.score_per_token?t.filterSize(n.split(" "),this.token_query_min_length,this.token_query_max_length):[],o=t.pack_tokens(i),s=n.substring(0,this.token_fused_max_length),a=this.score_test_fused||!this.score_per_token?t.alphabet(s):{};return new e(n,o,s,a)},_prepSource:function(e,r,n){var o,s=e.length;n?(this.index=new Array(s),o=0):o=s;for(var a=this.index,u=this.token_field_min_length,h=this.token_field_max_length,f=-1;++f<s;){for(var c=e[f],_=t.generateFields(c,r),l=_.length,p=-1;++p<l;)for(var d=_[p],m=-1,v=d.length;++m<v;)d[m]=t.filterSize(this.normalize(d[m]).split(" "),u,h);a[o++]=new i(c,_)}},getInteractive:function(){var t=this,e=this.interactive_debounce,r=this.interactive_mult,n=this.interactive_burst;if(0===e)return function(e,r){return r(t.search(e))};var i,o,s=window.performance&&window.performance.now?window.performance:Date,a=0,u=!1;return function(h,f,c,_){var l=function(){i=null,u&&(o=t.search(h),_(o)),a=0,u=!1};if(clearTimeout(i),i=setTimeout(l,e),++a<n){u=!1;var p=s.now();o=t.search(h);var d=f(o),m=s.now();return e=.5*e+.5*r*(m-p),d}return u=!0,c(o)}},__ttAdapter:function(){var t=this.getInteractive(),e=function(t){};return function(r,n,i){t(r,n,e,i)}},$uiSource:function(){var t=this.getInteractive(),e=function(t){};return function(r,n){t(r.term,n,e,n)}},getMatchingField:function(e){var r=t.generateFields(e.item,[this.keys[e.matchIndex]]);return r[0][e.subIndex]},aliasResult:function(e){for(var r=t.generateFields(e.item,this.keys),n={},i=-1,o=r.length;++i<o;)n[this.tags[i]]=r[i].join(this.join_str);return n._item=e.item,n._score=e.score,n._match=r[e.matchIndex][e.subIndex],n}};for(var _="\xe3\xe0\xe1\xe4\xe2\xe6\u1ebd\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf5\xf2\xf3\xf6\xf4\u0153\xf9\xfa\xfc\xfb\xf1\xe7",l="aaaaaaeeeeeiiiioooooouuuunc",p={},d=0;d<_.length;d++)p[_[d]]=l[d];return t.generateFields=function(t,e){if(!e.length)return[[t.toString()]];for(var r=e.length,n=new Array(r),i=-1;++i<r;)n[i]=u(t,e[i].split("."),[],0);return n},t.filterSize=function(t,e,r){for(var n,i,o=-1,s=-1,a=t.length,u=[];++o<a;)n=t[o],i=n.length,i>=e&&(u[++s]=r>i?n:n.substr(0,r));return u},t.map=function(t,e,r,n){var i=t.length;if(n>0&&i>n&&(i=n),"function"!=typeof e)return t.slice(0,i);for(var o=new Array(i),s=-1;++s<i;)o[s]=e.call(r,t[s],s,t);return o},t.mapField=function(t,e,r){var n=t.length;if(r>0&&n>r&&(n=r),""===e)return t.slice(0,n);var i,o,s=new Array(n);if(-1===e.indexOf("."))for(o=-1;++o<n;)i=t[o],e in i&&(s[o]=i[e]);else{var a=e.split("."),u=a.length;for(o=-1;++o<n;){i=t[o];for(var h=-1;++h<u;){var f=a[h];if(!(f in i))break;i=i[f]}s[o]=i}}return s},t.filterGTE=function(t,e,r){for(var n,i=-1,o=-1,s=t.length,a=[];++i<s;)n=t[i],n[e]>=r&&(a[++o]=n);return a},t.pack_tokens=function(e){for(var n,i=-1,o=e.length,s=[];o>i;){for(var a=[],u={},h=0,f=0;++i<o;){var _=e[i],l=_.length;if(l>=c){n=new r([_],t.posVector(_),4294967295);break}if(l+h>=c){i--;break}a.push(_),t.bitVector(_,u,h),f|=(1<<_.length-1)-1<<h,h+=l}a.length>0&&s.push(new r(a,u,f)),n&&(s.push(n),n=null)}return s},t.alphabet=function(e){var r=e.length;return r>c?t.posVector(e):t.bitVector(e,{},0)},t.mapAlphabet=function(e){for(var r=e.length,n=new Array(r),i=-1;++i<r;){var o=e[i];o.length>c?n[i]=t.posVector(o):n[i]=t.bitVector(o,{},0)}return n},t.bitVector=function(t,e,r){for(var n,i=t.length,o=-1,s=r;++o<i;)n=t[o],n in e?e[n]|=1<<s++:e[n]=1<<s++;return e},t.posVector=function(t){for(var e,r={},n=t.length,i=-1;++i<n;)e=t[i],e in r?r[e].push(i):r[e]=[i];for(e in r)r.hasOwnProperty(e)&&r[e].push(1/0);return r},t.prototype.score=function(e,r){var n=t.alphabet(e);return t.score_map(e,r,n,this)},t.score_map=function(e,r,n,i){var o,s,a=e.length,u=r.length,h=i.bonus_match_start,f=u>a?a:u;if(0===f||u<i.token_min_rel_size*a||u>i.token_max_rel_size*a)return 0;var _=(a+u)/(2*a*u),l=0;if(e===r)l=f;else for(;e[l]===r[l]&&++l<f;);if(l===f)return s=l,_*s*s+h*l;if(a>c)return s=t.llcs_large(e,r,n,l),_*s*s+h*l;var p,d,m=(1<<a)-1,v=m;for(o=l-1;++o<u;)d=r[o],d in n&&(p=v&n[d],v=v+p|v-p);return m&=~((1<<l)-1),v=~v&m,v-=v>>1&1431655765,v=(858993459&v)+(v>>2&858993459),s=16843009*(v+(v>>4)&252645135)>>24,s+=l,_*s*s+h*l},t.score_pack=function(t,e,r){for(var n,i,o=t.tokens,s=o.length,a=4294967295,u=0|t.gate,h=t.map,f=e.length,c=-1;++c<f;)i=e[c],i in h&&(n=a&h[i],a=(a&u)+(n&u)|a-n);a=~a;for(var _=-1,l=0,p=r.bonus_match_start,d=r.token_min_rel_size,m=r.token_max_rel_size,v=new Array(s);++_<s;){var g,y,k=o[_],w=k.length;if(d*w>f||f>m*w)v[_]=0,l+=w;else{if(k===e)y=g=w;else{var b=f>w?w:f;for(y=0;k[y]===e[y]&&++y<b;);g=y;for(var x=(a>>>l&(1<<w)-1)>>>y;x;)x&=x-1,g++}l+=w;var O=(w+f)/(2*w*f);v[_]=O*g*g+p*y}}return v},t.llcs_large=function(t,e,r,n){var i,o,s,a,u,f,c;void 0===n&&(n=0),s=n?[new h(0,n),new h(1/0,1/0)]:[new h(1/0,1/0)];var _,l,p,d,m,v,g=n,y=e.length;for(v=n;y>v;v++){var k=e[v];if(k in r){_=r[k],a=[],u=-1,l=0,o=_[0],c=-1,d=-1;for(var w=s.length;++d<w;){for(f=c,p=s[d],i=p.start,c=p.end,m=c-i;f>o;)o=_[++l];o>=i?a[++u]=p:(o===f?a[u].end++:1===m?(p.start=o,p.end=o+1,a[++u]=p):a[++u]=new h(o,o+1),m>1&&(p.start++,a[++u]=p))}i>o&&(a[++u]=p,g++),s=a}}return g},"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.FuzzySearch=t,t}();
//# sourceMappingURL=../map/FuzzySearch.map