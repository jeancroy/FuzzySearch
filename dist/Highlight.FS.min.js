/**
 * @license Highlight.FuzzySearch.js
 * Highlight plugin for FuzzySearch
 * https://github.com/jeancroy/FuzzySearch
 *
 * Copyright (c) 2015, Jean Christophe Roy
 * Licensed under The MIT License.
 * http://opensource.org/licenses/MIT
 */
!function(){function r(r,t,i){var h,n,a=r.length,s=[];for(h=0;a>h;h++)s[h]={};var o,g=e(r,s,0,0,i),f=0;for(h=0;a>h&&(o=s[h][f],o);h++)t[h]=n=o.index,n>-1&&(f|=1<<n);return g}function e(r,i,h,a,s){var o=r.length,g=r[a].length;g>n&&(g=n);var f,l,u,c=s[a],p=0,v=-1,_=o-1>a,m=i[a+1];for(f=0;g>f;f++){var b=1<<f;h&b||(l=r[a][f],c>l||(_&&(u=h|b,l+=u in m?m[u].score:e(r,i,u,a+1,s)),l>p&&(p=l,v=f)))}return _&&(u=h,l=u in m?m[u].score:e(r,i,u,a+1,s),l>p&&(p=l,v=-1)),i[a][h]=new t(p,v),p}function t(r,e){this.score=r,this.index=e}function i(r,e){var t,i,h=r.slice();for(r.length=e,t=0;e>t;t++)r[t]=-1;for(t=0;t<h.length;t++)i=h[t],i>-1&&e>i&&(r[i]=t)}var h;h="function"==typeof require?require("FuzzySearch"):window.FuzzySearch;var n=32,a={highlight_prefix:!1,highlight_bridge_gap:2,highlight_before:'<strong class="highlight">',highlight_after:"</strong>"},s=h.defaultOptions;for(var o in a)a.hasOwnProperty(o)&&(s[o]=a[o]);h.prototype.highlight=function(r){return h.highlight(this.query.normalized,r,this)},h.highlight=function(r,e,t){if(void 0===t&&(t=h.defaultOptions),!e)return"";var i=t.highlight_before,n=t.highlight_after,a=t.score_per_token,s=t.score_test_fused,o=t.normalize(r),g=t.normalize(e),f=o.split(" "),l=g.split(" "),u=e.split(/\s+/),c=[],p=[],v=0,_=0;if(a&&(_=h.matchTokens(f,l,p,t,!0)),(s||!a)&&(v=h.score_map(o,g,h.alphabet(o),t)),0===_&&0===v)return e;(!a||v>_)&&(f=[o],l=[g],u=[u.join(" ")],p=[0]);for(var m=u.length,b=-1;++b<m;){var d=p[b];if(-1!==d){var k=f[d],x=l[b],y=u[b],w=0,z=[],M=[];h.align(k,x,z,M);for(var O=z.length,q=-1;++q<O;){var A=z[q],j=M[q];A>w&&c.push(y.substring(w,A)),c.push(i+y.substring(A,j)+n),w=j}c.push(y.substring(w)+" ")}else c.push(u[b]+" ")}return c.join("")},h.align=function(r,e,t,i,n){void 0===n&&(n=h.defaultOptions);var a,s,o=1,g=-.1,f=-.01,l=0,u=1,c=2,p=3,v=Math.min(r.length+1,n.token_query_max_length),_=Math.min(e.length+1,n.token_field_max_length),m=_>v?v:_,b=0;if(r===e)b=v,v=0;else if(n.highlight_prefix){for(a=0;m>a&&r[a]===e[a];a++)b++;b&&(r=r.substring(b),e=e.substring(b),v-=b,_-=b)}var d=0,k=0,x=0,y=new Array(v*_),w=_-1;if(v>1&&_>1){var z,M,O,q,A=new Array(_),j=new Array(_),F=0;for(s=0;_>s;s++)j[s]=0,A[s]=0,y[s]=l;for(a=1;v>a;a++)for(F=0,z=A[0],w++,y[w]=l,s=1;_>s;s++)switch(q=j[s]=Math.max(j[s]+f,A[s]+g),F=Math.max(F+f,A[s-1]+g),O=r[a-1]===e[s-1]?z+o:-(1/0),z=A[s],M=A[s]=Math.max(O,q,F,0),w++,M){case O:y[w]=p,M>d&&(d=M,k=a,x=s);break;case F:y[w]=c;break;case q:y[w]=u;break;default:y[w]=l}}var S=n.highlight_bridge_gap,T=0;if(d>0){a=k,s=x,w=a*_+s,T=x,i.push(x+b);for(var P=!0;P;)switch(y[w]){case u:a--,w-=_;break;case c:s--,w--;break;case p:T-s>S&&(t.push(T+b),i.push(s+b)),s--,a--,T=s,w-=_+1;break;case l:default:P=!1}t.push(T+b)}return b&&(T>0&&S>=T?t[t.length-1]=0:(t.push(0),i.push(b))),t.reverse(),i.reverse(),d+b},h.matchTokens=function(e,t,n,a,s){void 0===a&&(a=h.defaultOptions),void 0==s&&(s=!1);var o,g,f,l,u,c,p,v=a.minimum_match,_=a.thresh_relative_to_best,m=[],b=e.length,d=t.length,k=h.mapAlphabet(e),x=v,y=-1,w=-1,z=0,M=[];for(o=0;b>o;o++)if(f=[],n[o]=-1,x=v,l=e[o],l.length){for(c=k[o],g=0;d>g;g++)u=t[g],u.length&&(p=h.score_map(l,u,c,a),f[g]=p,p>v&&z++,p>x&&(x=p,y=o,w=g));M[o]=x,m[o]=f}if(0===z)return 0;if(1===z)return n[y]=w,s&&i(n,d),x;for(o=0;o<e.length;o++)M[o]=Math.max(_*M[o],v);var O=r(m,n,M);return s&&i(n,d),O}}();
//# sourceMappingURL=../map/Highlight.FS.map